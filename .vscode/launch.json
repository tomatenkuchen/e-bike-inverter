{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Attach to External ST-Link GDB Server",
            "type": "cortex-debug",
            "request": "attach",
            "servertype": "external",
            
            // --- GDB Target and Path ---
            "gdbTarget": "localhost:61234", 
            // "preLaunchTask": "gdbserver",
            // gdbpath": "/usr/bin/arm-none-eabi-gdb", // **Change to your actual arm-none-eabi-gdb path**h**
            
            // --- Program Details ---
            // This is the executable GDB needs to load symbols from.
            "executable": "${workspaceFolder}/build/Debug/src/batterycharger.elf",
            "cwd": "${workspaceFolder}",

            // --- Optional: SVD File for Peripheral Register Views ---
            // "svdFile": "${workspaceFolder}/STM32F407.svd", // **Change to your SVD file path (highly recommended)**
            "device": "STM32G431CB",
            "runToEntryPoint": "reset_handler",

            // --- Commands to run after GDB connects to the server ---
            "postAttachCommands": [
                "monitor halt",
                "load",
            ],
            "showDevDebugOutput": "raw"
        }
    ]
}